<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Miao Menu Editor v3</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<!-- 左侧工具栏 -->
<div class="sidebar">
    <h3>🛠️ 全局设置</h3>

    <div class="form-row">
        <label>背景图片</label>
        <select id="bgSelect" onchange="updateBg(this.value)"></select>
        <input type="file" id="bgUpload" hidden onchange="uploadFile('background', this)">
        <button class="btn-primary" style="width:100%; margin-top:5px;" onclick="document.getElementById('bgUpload').click()">📤 上传背景</button>
    </div>

    <div class="form-row">
        <label>图标库</label>
        <input type="file" id="iconUpload" hidden onchange="uploadFile('icon', this)">
        <button class="btn-primary" style="width:100%" onclick="document.getElementById('iconUpload').click()">📤 上传新图标</button>
    </div>

    <div style="flex:1"></div>
    <button class="btn-save" onclick="saveAll()">💾 保存并生效</button>
</div>

<!-- 主画布 -->
<div class="workspace">
    <div id="canvas" class="canvas"></div>
</div>

<!-- 编辑弹窗 -->
<div id="editModal" class="modal-overlay">
    <div class="modal">
        <h3 id="modalTitle">编辑内容</h3>

        <div id="field-name" class="form-row">
            <label>标题 / 名称</label>
            <input id="inp-name">
        </div>

        <div id="field-desc" class="form-row">
            <label>描述</label>
            <input id="inp-desc">
        </div>

        <div id="field-icon" class="form-row">
            <label>图标</label>
            <select id="inp-icon" class="icon-select"></select>
        </div>

        <div class="btn-row">
            <button class="btn-danger" id="btn-delete" onclick="deleteCurrent()">🗑️ 删除</button>
            <button class="btn-cancel" onclick="closeModal()">取消</button>
            <button class="btn-primary" onclick="saveModal()">✅ 确定</button>
        </div>
    </div>
</div>

<script src="/static/editor.js"></script>
</body>
</html>